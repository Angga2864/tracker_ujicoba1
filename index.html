<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real-time Kereta Api Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
      :root {
        --primary-color: #e74c3c;
        --secondary-color: #2c3e50;
        --accent-color: #3498db;
        --light-color: #ecf0f1;
        --dark-color: #2c3e50;
        --success-color: #2ecc71;
        --warning-color: #f39c12;
        --danger-color: #e74c3c;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Roboto", sans-serif;
        background-color: #f5f5f5;
        color: #333;
        line-height: 1.6;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        background-color: var(--primary-color);
        color: white;
        padding: 20px 0;
        text-align: center;
        border-radius: 8px 8px 0 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      h1 {
        font-size: 2.2rem;
        margin-bottom: 10px;
      }

      .station-selector {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 30px;
      }

      .station-btn {
        padding: 12px 25px;
        border: none;
        border-radius: 50px;
        background-color: var(--secondary-color);
        color: white;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .station-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .station-btn.active {
        background-color: var(--accent-color);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .realtime-info {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .current-time {
        font-size: 1.8rem;
        font-weight: 500;
        color: var(--dark-color);
        margin-bottom: 5px;
      }

      .current-date {
        font-size: 1.2rem;
        color: #666;
        margin-bottom: 20px;
      }

      .station-name {
        font-size: 1.5rem;
        color: var(--primary-color);
        margin-bottom: 20px;
        font-weight: 700;
      }

      .train-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .train-section {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .section-title {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #eee;
        color: var(--secondary-color);
      }

      .passed .section-title {
        color: var(--danger-color);
      }

      .current .section-title {
        color: var(--warning-color);
      }

      .upcoming .section-title {
        color: var(--success-color);
      }

      .train-list {
        list-style: none;
      }

      .train-item {
        padding: 15px 0;
        border-bottom: 1px solid #eee;
      }

      .train-item:last-child {
        border-bottom: none;
      }

      .train-number {
        font-weight: 700;
        color: var(--dark-color);
        font-size: 1.1rem;
      }

      .train-name {
        font-weight: 500;
        margin: 5px 0;
      }

      .train-time {
        font-size: 0.9rem;
        color: #666;
      }

      .train-status {
        display: inline-block;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 500;
        margin-top: 5px;
      }

      .train-status.berhenti {
        background-color: var(--success-color);
        color: white;
      }

      .train-status.langsung {
        background-color: var(--accent-color);
        color: white;
      }

      .no-trains {
        color: #666;
        font-style: italic;
        padding: 15px 0;
      }

      footer {
        text-align: center;
        padding: 20px;
        color: #666;
        font-size: 0.9rem;
        margin-top: 30px;
      }

      .refresh-btn {
        display: block;
        margin: 0 auto 30px;
        padding: 12px 25px;
        background-color: var(--accent-color);
        color: white;
        border: none;
        border-radius: 50px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .refresh-btn:hover {
        background-color: #2980b9;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      @media (max-width: 768px) {
        .station-selector {
          flex-direction: column;
          align-items: center;
        }

        .station-btn {
          width: 100%;
          max-width: 300px;
        }

        .train-sections {
          grid-template-columns: 1fr;
        }

        h1 {
          font-size: 1.8rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1><i class="fas fa-train"></i> Real-time Kereta Api Tracker</h1>
        <p>Pantau pergerakan kereta api di stasiun pilihan Anda</p>
      </header>

      <div class="station-selector">
        <button class="station-btn" data-station="YK">Stasiun Yogyakarta (YK)</button>
        <button class="station-btn" data-station="LPN">Stasiun Lempuyangan (LPN)</button>
      </div>

      <button id="refreshBtn" class="refresh-btn"><i class="fas fa-sync-alt"></i> Perbarui Data</button>

      <div class="realtime-info">
        <div class="current-time" id="currentTime">00:00:00</div>
        <div class="current-date" id="currentDate">Hari, 1 Januari 2025</div>
        <div class="station-name" id="stationName">Pilih stasiun untuk memulai</div>
      </div>

      <div class="train-sections">
        <div class="train-section passed">
          <h2 class="section-title"><i class="fas fa-history"></i> Baru Saja Melintas</h2>
          <ul class="train-list" id="passedTrains">
            <li class="no-trains">Pilih stasiun untuk melihat data</li>
          </ul>
        </div>

        <div class="train-section current">
          <h2 class="section-title"><i class="fas fa-clock"></i> Sedang Melintas</h2>
          <ul class="train-list" id="currentTrains">
            <li class="no-trains">Pilih stasiun untuk melihat data</li>
          </ul>
        </div>

        <div class="train-section upcoming">
          <h2 class="section-title"><i class="fas fa-arrow-up"></i> Segera Melintas</h2>
          <ul class="train-list" id="upcomingTrains">
            <li class="no-trains">Pilih stasiun untuk melihat data</li>
          </ul>
        </div>
      </div>
    </div>

    <footer>
      <p>Dibuat dengan <i class="fas fa-heart" style="color: #e74c3c"></i> oleh @angga.2864 [Didan] - 2025</p>
    </footer>

    <script>
      // Database jadwal kereta api
      const trainSchedules = {
        YK: [
          { number: "KA 273", name: "Kahuripan", time: "00:02:59", status: "langsung" },
          { number: "KA 252", name: "Jayakarta", time: "00:29:00", status: "langsung" },
          { number: "KA 255", name: "Jaka Tingkir", time: "00:33:00", status: "langsung" },
          { number: "PLB 7001", name: "Gajayana Tambahan", time: "00:40:00", status: "berhenti" },
          { number: "KA 68", name: "Malabar", time: "00:51:00", status: "berhenti" },
        ],
        LPN: [
          { number: "KA 713", name: "Commuter Line Yogyakarta", time: "11:53:59", status: "berhenti" },
          { number: "KA 723", name: "Commuter Line Yogyakarta", time: "11:55:00", status: "berhenti" },
          { number: "KA 9", name: "Argo Wilis", time: "12:06:00", status: "langsung" },
          { number: "KA 724", name: "Commuter Line Yogyakarta", time: "12:12:00", status: "berhenti" },
          { number: "KA 733F", name: "Commuter Line Yogyakarta", time: "12:35:00", status: "berhenti" },
          { number: "KA 74", name: "Fajar Utama Solo", time: "12:40:00", status: "langsung" },
          { number: "KA 5", name: "Argo Semeru", time: "12:47:59", status: "langsung" },
          { number: "KA 6", name: "Argo Semeru", time: "12:53:00", status: "langsung" },
          { number: "KA 235F", name: "Sancaka Utara", time: "12:58:00", status: "langsung" },
          { number: "KA 257", name: "Progo", time: "13:09:59", status: "berhenti" },
          { number: "KA 78", name: "Lodaya", time: "13:20:00", status: "langsung" },
          { number: "KA 10", name: "Argo Wilis", time: "13:30:00", status: "langsung" },
          { number: "KA 734F", name: "Commuter Line Yogyakarta", time: "13:34:59", status: "berhenti" },
          { number: "KA 2603", name: "Mawalo Tanker", time: "13:54:59", status: "langsung" },
        ],
      };

      // Nama stasiun lengkap
      const stationNames = {
        YK: "Stasiun Yogyakarta (YK)",
        LPN: "Stasiun Lempuyangan (LPN)",
      };

      let currentStation = null;
      let currentTime = new Date();

      function updateClock() {
        currentTime = new Date();
        const timeString = currentTime.toLocaleTimeString("id-ID", { hour: "2-digit", minute: "2-digit", second: "2-digit" });
        const dateString = currentTime.toLocaleDateString("id-ID", { weekday: "long", year: "numeric", month: "long", day: "numeric" });

        document.getElementById("currentTime").textContent = timeString;
        document.getElementById("currentDate").textContent = dateString;

        // Update kereta realtime
        if (currentStation) displayTrains(currentStation);
      }

      function timeToMinutes(timeStr) {
        const [hours, minutes, seconds] = timeStr.split(":").map(Number);
        return hours * 60 + minutes + seconds / 60;
      }

      function formatTime(timeStr) {
        const [h, m] = timeStr.split(":");
        return `${h.padStart(2, "0")}:${m.padStart(2, "0")}`;
      }

      function filterTrains(station) {
        if (!station) return { passedTrains: [], currentTrains: [], upcomingTrains: [] };

        const currentMinutes = currentTime.getHours() * 60 + currentTime.getMinutes() + currentTime.getSeconds() / 60;
        const stationTrains = trainSchedules[station];

        const passedTrains = stationTrains
          .filter((train) => timeToMinutes(train.time) < currentMinutes)
          .sort((a, b) => timeToMinutes(b.time) - timeToMinutes(a.time))
          .slice(0, 2);

        const currentTrains = stationTrains.filter((train) => {
          const trainMinutes = timeToMinutes(train.time);
          return Math.abs(trainMinutes - currentMinutes) <= 2;
        });

        const upcomingTrains = stationTrains
          .filter((train) => timeToMinutes(train.time) > currentMinutes)
          .sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time))
          .slice(0, 2);

        return { passedTrains, currentTrains, upcomingTrains };
      }

      function displayTrains(station) {
        currentStation = station;
        document.getElementById("stationName").textContent = stationNames[station];

        const { passedTrains, currentTrains, upcomingTrains } = filterTrains(station);

        const sections = [
          { id: "passedTrains", trains: passedTrains, msg: "Tidak ada data", prefix: "Melintas pukul" },
          { id: "currentTrains", trains: currentTrains, msg: "Tidak ada kereta yang sedang melintas", prefix: "Jadwal pukul" },
          { id: "upcomingTrains", trains: upcomingTrains, msg: "Tidak ada jadwal dalam waktu dekat", prefix: "Akan melintas pukul" },
        ];

        sections.forEach((sec) => {
          const list = document.getElementById(sec.id);
          list.innerHTML = "";

          if (sec.trains.length > 0) {
            sec.trains.forEach((train) => {
              const li = document.createElement("li");
              li.className = "train-item";
              li.innerHTML = `
                            <div class="train-number">${train.number}</div>
                            <div class="train-name">${train.name}</div>
                            <div class="train-time">${sec.prefix} ${formatTime(train.time)}</div>
                            <span class="train-status ${train.status}">
                                ${train.status === "berhenti" ? "Berhenti" : "Langsung"}
                            </span>
                        `;
              list.appendChild(li);
            });
          } else {
            list.innerHTML = `<li class="no-trains">${sec.msg}</li>`;
          }
        });
      }

      // Event listeners
      document.querySelectorAll(".station-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          document.querySelectorAll(".station-btn").forEach((b) => b.classList.remove("active"));
          this.classList.add("active");
          displayTrains(this.dataset.station);
        });
      });

      document.getElementById("refreshBtn").addEventListener("click", function () {
        updateClock();
      });

      // Init
      updateClock();
      setInterval(updateClock, 1000);

      // Default stasiun
      document.querySelector('[data-station="YK"]').click();
    </script>
  </body>
</html>
